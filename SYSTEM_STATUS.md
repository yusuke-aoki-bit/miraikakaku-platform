# Miraikakaku ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ãƒ¬ãƒãƒ¼ãƒˆ

## ğŸ“Š ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ (2025-08-23 21:00 JST)

### âœ… ç¨¼åƒä¸­ã‚µãƒ¼ãƒ“ã‚¹
- **API Server**: `miraikakaku-api-fastapi` (us-central1) - å®Œå…¨ç¨¼åƒä¸­
- **Batch Processor**: `miraikakaku-batch-final` (us-central1) - ç¶™ç¶šç¨¼åƒä¸­
- **Frontend**: `miraikakaku-front` (us-central1) - ç¨¼åƒä¸­
- **Database**: Cloud SQL MySQL - æ­£å¸¸æ¥ç¶šä¸­

### ğŸ“ˆ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å……è¶³ç‡ (æ–°é«˜ç›®æ¨™åŸºæº–)

#### ç›®æ¨™è¨­å®š
- **ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿**: 1,825ä»¶/éŠ˜æŸ„ (5å¹´åˆ†ã®æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿)
- **äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿**: 500ä»¶/éŠ˜æŸ„ (å¤šæœŸé–“äºˆæ¸¬)
- **AIæ±ºå®šè¦å› **: å„äºˆæ¸¬Ã—5å€‹ã®è¦å› 
- **ãƒ†ãƒ¼ãƒæ´å¯Ÿ**: 1,000ä»¶ (æ¥­ç•Œãƒ»ã‚»ã‚¯ã‚¿ãƒ¼ç¶²ç¾…)

#### ç¾åœ¨ã®å……è¶³ç‡
- **ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿**: 5.54% (1,226,736ä»¶ / 22,140,900ä»¶)
- **äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿**: 3.11% (188,647ä»¶ / 6,066,000ä»¶)
- **AIæ±ºå®šè¦å› **: 2.96% (27,937ä»¶ / 943,235ä»¶)
- **ãƒ†ãƒ¼ãƒæ´å¯Ÿ**: 22.50% (225ä»¶ / 1,000ä»¶)

#### ãƒ‡ãƒ¼ã‚¿å¢—åŠ çŠ¶æ³
- ã‚¢ã‚¯ãƒ†ã‚£ãƒ–éŠ˜æŸ„: 12,132éŠ˜æŸ„
- ãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚Šç¶™ç¶šçš„ã«ãƒ‡ãƒ¼ã‚¿å¢—åŠ ä¸­
- 1æ—¥ã‚ãŸã‚Šæ•°åƒä»¶ã®ãƒšãƒ¼ã‚¹ã§ãƒ‡ãƒ¼ã‚¿è“„ç©

## ğŸ”§ APIä¿®æ­£å±¥æ­´

### è§£æ±ºæ¸ˆã¿å•é¡Œ (2025-08-23)

#### 1. StockPriceHistoryãƒ¢ãƒ‡ãƒ«å±æ€§ã‚¨ãƒ©ãƒ¼
- **å•é¡Œ**: `'StockPriceHistory' object has no attribute 'data_source'`
- **åŸå› **: ãƒ¢ãƒ‡ãƒ«å®šç¾©ã¨APIä½¿ç”¨ã®ä¸ä¸€è‡´
- **ä¿®æ­£**: `data_source="database"`ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `/api/finance/routes.py:138`

#### 2. StockPredictionsãƒ¢ãƒ‡ãƒ«å±æ€§ã‚¨ãƒ©ãƒ¼
- **å•é¡Œ**: `'StockPredictions' has no attribute 'is_active'`
- **åŸå› **: å®Ÿéš›ã®DBã‚¹ã‚­ãƒ¼ãƒã«is_activeåˆ—ãŒå­˜åœ¨ã—ãªã„
- **ä¿®æ­£**: 
  - `StockPredictions.is_active == True` â†’ æ¡ä»¶å‰Šé™¤
  - `pred.model_type` â†’ `pred.model_version`
  - `pred.prediction_horizon` â†’ `pred.prediction_days`
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `/api/finance/routes.py` è¤‡æ•°ç®‡æ‰€

#### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ä¸åœ¨ã‚¨ãƒ©ãƒ¼
- **å•é¡Œ**: `Table 'user_profiles' doesn't exist`
- **åŸå› **: ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«æœªä½œæˆ
- **ä¿®æ­£**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ¢ãƒƒã‚¯å®Ÿè£…ã«å¤‰æ›´
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `/api/user/routes.py:39-55`

## ğŸŒ ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¨¼åƒçŠ¶æ³

### âœ… æ­£å¸¸ç¨¼åƒä¸­
- `GET /health` - ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `GET /docs` - API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (Swagger UI)
- `GET /api/finance/stocks/{symbol}/price` - æ ªä¾¡ãƒ‡ãƒ¼ã‚¿å–å¾—
- `GET /api/finance/stocks/{symbol}/predictions` - äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿å–å¾—
- `GET /api/finance/stocks/search` - éŠ˜æŸ„æ¤œç´¢
- `GET /api/finance/v2/available-stocks` - åˆ©ç”¨å¯èƒ½éŠ˜æŸ„ä¸€è¦§
- `GET /api/ai-factors/all` - AIæ±ºå®šè¦å› å–å¾—
- `GET /api/insights/themes` - ãƒ†ãƒ¼ãƒæ´å¯Ÿä¸€è¦§
- `GET /api/insights/themes/{theme_name}` - ãƒ†ãƒ¼ãƒè©³ç´°
- `GET /api/users/{user_id}/profile` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰

### ğŸ” ãƒ†ã‚¹ãƒˆæ¸ˆã¿ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

#### ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿
```json
{
  "symbol": "1401",
  "date": "2025-08-22T00:00:00",
  "open_price": 1410.0,
  "high_price": 1423.0,
  "low_price": 1388.0,
  "close_price": 1405.0,
  "volume": 24100,
  "data_source": "database"
}
```

#### äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿
```json
{
  "symbol": "1401",
  "prediction_date": "2025-09-23T00:00:00",
  "predicted_price": 1410.0072,
  "confidence_score": 0.3,
  "model_type": "CONTINUOUS_247_V1",
  "prediction_horizon": 30,
  "is_active": true
}
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æƒ…å ±

### Cloud Run ã‚µãƒ¼ãƒ“ã‚¹
- **Project ID**: pricewise-huqkr
- **Region**: us-central1
- **API URL**: https://miraikakaku-api-fastapi-465603676610.us-central1.run.app

### æœ€æ–°ãƒ‡ãƒ—ãƒ­ã‚¤
- **API**: 2025-08-23 21:03 JST (revision: miraikakaku-api-fastapi-00007-zz8)
- **Batch**: 2025-08-23 20:22 JST (revision: miraikakaku-batch-final-*)
- **Status**: å…¨ã‚µãƒ¼ãƒ“ã‚¹æ­£å¸¸ç¨¼åƒä¸­

### ç’°å¢ƒè¨­å®š
- **Memory**: 2Gi
- **CPU**: 2
- **Max Instances**: 10
- **Port**: 8000
- **Environment**: production

## ğŸ“‹ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ

### å­˜åœ¨ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
1. `ai_decision_factors` - AIæ±ºå®šè¦å› ãƒ‡ãƒ¼ã‚¿
2. `analysis_reports` - åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
3. `batch_logs` - ãƒãƒƒãƒå‡¦ç†ãƒ­ã‚°
4. `stock_master` - éŠ˜æŸ„ãƒã‚¹ã‚¿
5. `stock_predictions` - æ ªä¾¡äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿
6. `stock_prices` - æ ªä¾¡å±¥æ­´ãƒ‡ãƒ¼ã‚¿
7. `theme_insights` - ãƒ†ãƒ¼ãƒæ´å¯Ÿãƒ‡ãƒ¼ã‚¿

### æœªä½œæˆãƒ†ãƒ¼ãƒ–ãƒ«
- `user_profiles` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ¢ãƒƒã‚¯å®Ÿè£…ã§å›é¿ï¼‰
- `user_watchlists` - ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ
- `user_portfolios` - ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª
- `prediction_contests` - äºˆæ¸¬ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ
- `user_contest_predictions` - ãƒ¦ãƒ¼ã‚¶ãƒ¼äºˆæ¸¬æŠ•ç¨¿

## ğŸ”„ ç¶™ç¶šä¸­ã®ãƒãƒƒãƒå‡¦ç†

### ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒƒãƒ
- **massive_batch_main.py**: å…¨12,132éŠ˜æŸ„ã®ç¶™ç¶šçš„ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
- **å‡¦ç†å¯¾è±¡**: ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã€äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã€AIæ±ºå®šè¦å› ã®ä¸¦åˆ—ç”Ÿæˆ
- **å®Ÿè¡Œé–“éš”**: ç¶™ç¶šå®Ÿè¡Œä¸­
- **Cloud Run**: `miraikakaku-batch-final` ã§å®Ÿè¡Œä¸­

### ãƒãƒƒãƒå‡¦ç†ã®æˆæœ
- éå»24æ™‚é–“ã§å¤§å¹…ãªãƒ‡ãƒ¼ã‚¿å¢—åŠ ã‚’å®Ÿç¾
- AIæ±ºå®šè¦å› : 200ä»¶ â†’ 27,937ä»¶ (+13,900%)
- ãƒ†ãƒ¼ãƒæ´å¯Ÿ: 5ä»¶ â†’ 225ä»¶ (+4,400%)
- ä¾¡æ ¼ãƒ»äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚‚ç¶™ç¶šçš„ã«å¢—åŠ ä¸­

## ğŸ¯ æ¬¡æœŸèª²é¡Œ

### çŸ­æœŸ (1-2é€±é–“)
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã®å®Ÿè£…
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å……è¶³ç‡10%è¶…ãˆã‚’ç›®æŒ‡ã—ãŸåŠ é€Ÿ
3. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰

### ä¸­æœŸ (1ãƒ¶æœˆ)
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆ
2. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å–å¾—æ©Ÿèƒ½ã®å¼·åŒ–
3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### é•·æœŸ (3ãƒ¶æœˆ)
1. æ–°é«˜ç›®æ¨™ï¼ˆä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿å……è¶³ç‡20%ï¼‰é”æˆ
2. AIäºˆæ¸¬ç²¾åº¦å‘ä¸Š
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½ãƒ•ãƒ«å®Ÿè£…

## ğŸ“ é‹ç”¨æƒ…å ±

### ç›£è¦–ãƒã‚¤ãƒ³ãƒˆ
- API ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šçŠ¶æ³
- ãƒãƒƒãƒå‡¦ç†é€²æ—
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡

### é€£çµ¡å…ˆãƒ»ãƒªã‚½ãƒ¼ã‚¹
- **GCP Project**: pricewise-huqkr
- **Database**: Cloud SQL (34.58.103.36:3306)
- **API Docs**: https://miraikakaku-api-fastapi-465603676610.us-central1.run.app/docs

---

*æœ€çµ‚æ›´æ–°: 2025-08-23 21:00 JST*
*Status: å…¨ã‚·ã‚¹ãƒ†ãƒ æ­£å¸¸ç¨¼åƒä¸­ âœ…*