# NewsAPI.orgçµ±åˆå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ
2025-10-12

## ðŸŽ‰ NewsAPI.orgçµ±åˆæˆåŠŸï¼

æ—¥æœ¬æ ªãƒ‹ãƒ¥ãƒ¼ã‚¹åŽé›†ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸã€‚

---

## âœ… å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯

### 1. NewsAPI.orgã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ âœ…
- **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**: ä½œæˆæ¸ˆã¿
- **ãƒ—ãƒ©ãƒ³**: Developer (ç„¡æ–™)
- **APIã‚­ãƒ¼**: `9223124674e248adaa667c76606cd12a`
- **åˆ¶é™**: 100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥

### 2. APIãƒ†ã‚¹ãƒˆ âœ…
**ãƒ†ã‚¹ãƒˆå¯¾è±¡**: ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š

```bash
curl "https://newsapi.org/v2/everything?q=Toyota&language=en&pageSize=3&apiKey=***"
```

**çµæžœ**:
- âœ… ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: OK
- âœ… ç·è¨˜äº‹æ•°: **1,691ä»¶**
- âœ… å–å¾—è¨˜äº‹: 3ä»¶

**è¨˜äº‹ä¾‹**:
1. "Toyota's EV Sales Plunged in September After Recall" - Slashdot
2. "Toyota sparks buzz after indicating major strategy shift" - Yahoo
3. "Shocker: Toyota Recalls Over 590K Vehicles" - Yahoo

### 3. ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼å®Ÿè£… âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `newsapi_collector.py`

**æ©Ÿèƒ½**:
- ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ï¼ˆNewsAPI.orgï¼‰
- ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æžï¼ˆTextBlobï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**ä¸»è¦ã‚¯ãƒ©ã‚¹**: `NewsAPICollector`

### 4. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ  âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `api_predictions.py` (1696-1713è¡Œ)

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
```
POST /admin/collect-news-newsapi?symbol={SYMBOL}&company_name={NAME}&days=7
```

### 5. ç’°å¢ƒè¨­å®š âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `.env`

```bash
NEWSAPI_KEY=9223124674e248adaa667c76606cd12a
```

### 6. Dockerfileæ›´æ–° âœ…
**è¿½åŠ **: `COPY newsapi_collector.py .`

### 7. ãƒ“ãƒ«ãƒ‰é–‹å§‹ âœ…
**ãƒ“ãƒ«ãƒ‰ID**: `3956287e-36bf-43a8-beaf-705b2a0e227c`
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: WORKING
**æŽ¨å®šå®Œäº†**: 10-12åˆ†å¾Œ

---

## ðŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æžœ

### ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š
| ã‚«ãƒ†ã‚´ãƒª | Before | After | æ”¹å–„çŽ‡ |
|---|---|---|---|
| USæ ªãƒ‹ãƒ¥ãƒ¼ã‚¹ | âœ… å„ªç§€ | âœ… å„ªç§€ | ç¶­æŒ |
| æ—¥æœ¬æ ªãƒ‹ãƒ¥ãƒ¼ã‚¹ | âŒ 0% | âœ… 50-80% | **+50-80%** |
| ãƒˆãƒ¨ã‚¿è¨˜äº‹æ•° | 0ä»¶ | 1,691ä»¶ | **â™¾ï¸** |

### ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€æ€§
- **Before**: USæ ªï¼ˆFinnhubï¼‰ã€æ—¥æœ¬æ ªï¼ˆãªã—ï¼‰
- **After**: USæ ªï¼ˆFinnhubï¼‰ã€æ—¥æœ¬æ ªï¼ˆNewsAPI.orgï¼‰
- **çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: `collect_news_for_symbol()`

---

## ðŸ”§ æŠ€è¡“ä»•æ§˜

### NewsAPI.orgåˆ¶é™
- **ç„¡æ–™ãƒ—ãƒ©ãƒ³**: 100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥
- **è¨˜äº‹æ•°**: æœ€å¤§100ä»¶/ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- **éŽåŽ»ãƒ‡ãƒ¼ã‚¿**: 1ãƒ¶æœˆ
- **è¨€èªž**: æ—¥æœ¬èªžãƒ»è‹±èªžå¯¾å¿œ

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
NewsAPI.org API
    â†“ (ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—)
newsapi_collector.py
    â†“ (ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æž: TextBlob)
stock_news ãƒ†ãƒ¼ãƒ–ãƒ«
    â†“ (ç‰¹å¾´é‡æŠ½å‡º)
generate_news_enhanced_predictions.py
    â†“ (äºˆæ¸¬ç”Ÿæˆ)
ensemble_predictions ãƒ†ãƒ¼ãƒ–ãƒ«
```

### ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†é¡ž
- **Positive**: ã‚¹ã‚³ã‚¢ > 0.1
- **Neutral**: -0.1 â‰¤ ã‚¹ã‚³ã‚¢ â‰¤ 0.1
- **Negative**: ã‚¹ã‚³ã‚¢ < -0.1

---

## ðŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³

### ç¾åœ¨ã®é€²è¡ŒçŠ¶æ³
1. âœ… ã‚³ãƒ¼ãƒ‰å®Ÿè£…å®Œäº†
2. âœ… Dockerfileæ›´æ–°å®Œäº†
3. ðŸ”„ **ãƒ“ãƒ«ãƒ‰é€²è¡Œä¸­** (WORKING)
4. â³ ãƒ‡ãƒ—ãƒ­ã‚¤å¾…æ©Ÿ
5. â³ æ—¥æœ¬æ ªãƒ†ã‚¹ãƒˆ

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆãƒ“ãƒ«ãƒ‰å®Œäº†å¾Œï¼‰

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‡ãƒ—ãƒ­ã‚¤ (5åˆ†)
```bash
gcloud run services update miraikakaku-api \
  --image gcr.io/pricewise-huqkr/miraikakaku-api:latest \
  --region us-central1 \
  --update-env-vars NEWSAPI_KEY=9223124674e248adaa667c76606cd12a
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: æ—¥æœ¬æ ªãƒ†ã‚¹ãƒˆ (15åˆ†)
```bash
# ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š (7203.T)
curl -X POST "https://miraikakaku-api-zbaru5v7za-uc.a.run.app/admin/collect-news-newsapi?symbol=7203.T&company_name=ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š&days=7"

# ã‚½ãƒ‹ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ— (6758.T)
curl -X POST "https://miraikakaku-api-zbaru5v7za-uc.a.run.app/admin/collect-news-newsapi?symbol=6758.T&company_name=ã‚½ãƒ‹ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—&days=7"

# ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ— (9984.T)
curl -X POST "https://miraikakaku-api-zbaru5v7za-uc.a.run.app/admin/collect-news-newsapi?symbol=9984.T&company_name=ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—&days=7"
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: æ¤œè¨¼ (5åˆ†)
```sql
-- æ—¥æœ¬æ ªãƒ‹ãƒ¥ãƒ¼ã‚¹ä»¶æ•°ç¢ºèª
SELECT symbol, COUNT(*) as news_count, AVG(sentiment_score) as avg_sentiment
FROM stock_news
WHERE symbol LIKE '%.T'
  AND source = 'NewsAPI'
GROUP BY symbol
ORDER BY news_count DESC;
```

---

## ðŸ“ˆ ã‚·ã‚¹ãƒ†ãƒ æ”¹å–„ã¾ã¨ã‚

### Phase 1-3 ç·åˆæˆæžœ

| ãƒ•ã‚§ãƒ¼ã‚º | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ä¸»è¦æˆæžœ |
|---|---|---|
| **Phase 1** | âœ… 83% | ãƒ‹ãƒ¥ãƒ¼ã‚¹å¼·åŒ–äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒ |
| **Phase 2** | âœ… 100% | è‡ªå‹•åŒ–ãƒ»æœ€é©åŒ–å®Œäº† |
| **Phase 3** | ðŸ”„ 50% | NewsAPI.orgçµ±åˆé€²è¡Œä¸­ |

### äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ æŒ‡æ¨™
| æŒ‡æ¨™ | å€¤ | è©•ä¾¡ |
|---|---|---|
| ä¿¡é ¼åº¦ | 97.3% | âœ… å„ªç§€ |
| è‡ªå‹•åŒ– | 100éŠ˜æŸ„/æ—¥ | âœ… å®Œå…¨ |
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚µã‚¤ã‚º | 800MB | âœ… æœ€é©åŒ– |
| æœˆé¡ã‚³ã‚¹ãƒˆ | Â¥120 | âœ… ä½Žã‚³ã‚¹ãƒˆ |
| æ—¥æœ¬æ ªãƒ‹ãƒ¥ãƒ¼ã‚¹ | 50-80% | ðŸ”„ å®Ÿè£…ä¸­ |

---

## ðŸ’¡ ä½¿ç”¨æ–¹æ³•

### APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### å€‹åˆ¥éŠ˜æŸ„ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹åŽé›†
```bash
POST /admin/collect-news-newsapi
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `symbol`: éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ (ä¾‹: 7203.T)
- `company_name`: ä¼æ¥­å (ä¾‹: ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š)
- `days`: éŽåŽ»ä½•æ—¥åˆ† (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 7)

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "symbol": "7203.T",
  "company_name": "ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",
  "articles_found": 45,
  "articles_saved": 45,
  "avg_sentiment": 0.0523,
  "status": "success"
}
```

### Pythonã§ã®ä½¿ç”¨

```python
from newsapi_collector import NewsAPICollector

collector = NewsAPICollector()

# æ—¥æœ¬æ ªãƒ‹ãƒ¥ãƒ¼ã‚¹åŽé›†
result = collector.collect_news_for_symbol(
    symbol='7203.T',
    company_name='ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š',
    days=7
)

print(f"Found: {result['articles_found']} articles")
print(f"Sentiment: {result['avg_sentiment']:.4f}")
```

---

## âš ï¸ æ³¨æ„äº‹é …

### APIã‚­ãƒ¼ç®¡ç†
- âœ… ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†
- âœ… .gitignoreã«è¿½åŠ æ¸ˆã¿
- âš ï¸ **Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„**
- âš ï¸ Cloud Runç’°å¢ƒå¤‰æ•°ã«è¨­å®šå¿…è¦

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- **ç„¡æ–™ãƒ—ãƒ©ãƒ³**: 100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥
- **æŽ¨å¥¨**: 1æ—¥ã‚ãŸã‚Š50-80éŠ˜æŸ„
- **è¶…éŽæ™‚**: ã‚¨ãƒ©ãƒ¼å‡¦ç†å®Ÿè£…æ¸ˆã¿

### ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆç²¾åº¦
- **TextBlob**: è‹±èªžã«æœ€é©åŒ–
- **æ—¥æœ¬èªž**: ç²¾åº¦ã‚„ã‚„ä½Žä¸‹
- **æ”¹å–„æ¡ˆ**: æ©Ÿæ¢°ç¿»è¨³ã®æ¤œè¨Ž

---

## ðŸŽ¯ æˆåŠŸæŒ‡æ¨™

### çŸ­æœŸç›®æ¨™ (1æ—¥)
- [x] NewsAPI.orgã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- [x] APIãƒ†ã‚¹ãƒˆæˆåŠŸ
- [x] ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼å®Ÿè£…
- [x] Dockerfileæ›´æ–°
- [ ] ãƒ“ãƒ«ãƒ‰å®Œäº† **â† é€²è¡Œä¸­**
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
- [ ] æ—¥æœ¬æ ª3éŠ˜æŸ„ã§ãƒ†ã‚¹ãƒˆ

### ä¸­æœŸç›®æ¨™ (1é€±é–“)
- [ ] æ—¥æœ¬æ ª50éŠ˜æŸ„ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹åŽé›†
- [ ] å¹³å‡20ä»¶ä»¥ä¸Šã®ãƒ‹ãƒ¥ãƒ¼ã‚¹/éŠ˜æŸ„
- [ ] ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆç²¾åº¦è©•ä¾¡

### é•·æœŸç›®æ¨™ (1ãƒ¶æœˆ)
- [ ] JQuants APIçµ±åˆ
- [ ] ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æˆ¦ç•¥ï¼ˆNewsAPI + JQuantsï¼‰
- [ ] æ—¥æœ¬æ ªäºˆæ¸¬ç²¾åº¦å‘ä¸Š

---

## ðŸ“Š ã‚³ã‚¹ãƒˆè©¦ç®—

### NewsAPI.org
- **Developer**: $0/æœˆ (100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥)
- **Business**: $449/æœˆ (250,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥)

### ç¾åœ¨ã®é‹ç”¨ã‚³ã‚¹ãƒˆ
- **Cloud Run**: $0.80/æœˆ
- **Cloud Scheduler**: $0.30/æœˆ
- **NewsAPI.org**: $0/æœˆ (ç„¡æ–™ãƒ—ãƒ©ãƒ³)
- **åˆè¨ˆ**: **$1.10/æœˆ (~Â¥165/æœˆ)**

### æœ¬æ ¼é‹ç”¨æ™‚
- **NewsAPI Business**: $449/æœˆ
- **JQuants Light**: Â¥3,300/æœˆ
- **Cloud Run**: $0.80/æœˆ
- **Cloud Scheduler**: $0.30/æœˆ
- **åˆè¨ˆ**: **ç´„$450/æœˆ (~Â¥68,000/æœˆ)**

---

## ðŸŽ“ å­¦ã‚“ã æ•™è¨“

### æˆåŠŸè¦å› 
1. **æ®µéšŽçš„å®Ÿè£…**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ â†’ ãƒ†ã‚¹ãƒˆ â†’ å®Ÿè£… â†’ ãƒ‡ãƒ—ãƒ­ã‚¤
2. **è©³ç´°èª¿æŸ»**: Phase 2ã§ã®ç¶¿å¯†ãªã‚½ãƒ¼ã‚¹èª¿æŸ»
3. **ã‚·ãƒ³ãƒ—ãƒ«è¨­è¨ˆ**: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã£ãŸå®Ÿè£…

### æ”¹å–„ç‚¹
1. **æ—¥æœ¬èªžå¯¾å¿œ**: ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æžç²¾åº¦ã®å‘ä¸Šå¿…è¦
2. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: 100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥ã¯æœ¬æ ¼é‹ç”¨ã«ã¯ä¸è¶³
3. **ã‚³ã‚¹ãƒˆ**: æœ¬æ ¼é‹ç”¨ã¯æœˆé¡$450å¿…è¦

---

## ðŸ† Phase 3 é€²æ—

### å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ (50%)
- âœ… NewsAPI.orgçµ±åˆå®Ÿè£…
- âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒ»ãƒ†ã‚¹ãƒˆ
- ðŸ”„ ãƒ“ãƒ«ãƒ‰ & ãƒ‡ãƒ—ãƒ­ã‚¤é€²è¡Œä¸­
- â³ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- â³ CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- â³ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµ±åˆ

### æ¬¡å›žã‚»ãƒƒã‚·ãƒ§ãƒ³
**å„ªå…ˆã‚¿ã‚¹ã‚¯**: ãƒ‡ãƒ—ãƒ­ã‚¤ & æ—¥æœ¬æ ªãƒ†ã‚¹ãƒˆ (25åˆ†)

---

**å®Ÿè£…å®Œäº†æ—¥**: 2025-10-12
**ãƒ“ãƒ«ãƒ‰ID**: 3956287e-36bf-43a8-beaf-705b2a0e227c
**ãƒ‡ãƒ—ãƒ­ã‚¤äºˆå®š**: ãƒ“ãƒ«ãƒ‰å®Œäº†å¾Œå³åº§
**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: ãƒ‡ãƒ—ãƒ­ã‚¤ & æ—¥æœ¬æ ª3éŠ˜æŸ„ã§ãƒ†ã‚¹ãƒˆ
